*** cron_daily.cpp.old	2019-10-18 23:14:27.912736372 -0400
--- cron_daily.cpp	2019-10-18 23:16:41.973793267 -0400
***************
*** 13,18 ****
  	return result;
  }
  
  bool ParseXMLAndUpdateDB(const string &xml_block, CMysql *db)
  {
  	bool	result = false;
--- 13,31 ----
  	return result;
  }
  
+ bool CleanupRemovedSessions(CMysql *db)
+ {
+ 	bool		result = true;
+ 
+ 	MESSAGE_DEBUG("", "", "start");
+ 
+ 	db->Query("DELETE FROM `sessions` WHERE `remove_flag_timestamp`< (UNIX_TIMESTAMP() - 3600*24*365) AND `remove_flag`=\"Y\";");
+ 	
+ 	MESSAGE_DEBUG("", "", "finish");
+ 
+ 	return result;
+ }
+ 
  bool ParseXMLAndUpdateDB(const string &xml_block, CMysql *db)
  {
  	bool	result = false;
***************
*** 384,389 ****
  
  		//--- start of daily cron main functionality
  		CleanupActivators(&db);
  
  		//--- Remove temporarily media files
  		RemoveTempMedia(&db);
--- 397,403 ----
  
  		//--- start of daily cron main functionality
  		CleanupActivators(&db);
+ 		CleanupRemovedSessions(&db);
  
  		//--- Remove temporarily media files
  		RemoveTempMedia(&db);
***************
*** 395,400 ****
  
  		ExpireOldContracts(&db);
  
  		//--- update currency rate exchange
  		UpdateCurrencyRateExchange(&db);
  
--- 409,415 ----
  
  		ExpireOldContracts(&db);
  
+ 
  		//--- update currency rate exchange
  		UpdateCurrencyRateExchange(&db);
  
